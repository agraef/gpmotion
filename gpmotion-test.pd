#N canvas 613 230 693 480 12;
#X obj 143 70 tgl 15 0 empty empty print 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#N canvas 757 376 418 358 oscreceive 0;
#X obj 47 135 oscparse;
#X obj 47 169 list trim;
#X obj 187 208 spigot;
#X obj 47 279 outlet;
#X obj 225 169 inlet;
#X msg 122 63 listen 8880;
#X msg 47 62 listen 0;
#X obj 47 32 sel 0;
#X obj 47 103 netreceive -u -b;
#X obj 47 -1 inlet;
#X obj 47 243 route devices;
#X obj 47 208 route joyosc;
#X obj 187 243 print osc;
#X obj 187 279 outlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 11 0;
#X connect 2 0 12 0;
#X connect 4 0 2 1;
#X connect 5 0 8 0;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 1 5 0;
#X connect 8 0 0 0;
#X connect 9 0 7 0;
#X connect 10 0 3 0;
#X connect 11 0 10 0;
#X connect 11 1 13 0;
#X coords 0 358 1 357 140 40 0;
#X restore 20 100 pd oscreceive 8880;
#X obj 20 70 tgl 15 0 empty empty poll 17 7 0 10 #ff8585 #000000 #000000
1 1;
#X floatatom 108 67 0 0 9 0 gc - -;
#N canvas 746 383 472 300 controller 0;
#X obj 20 70 route gc0;
#X msg 110 70 symbol gc\$1;
#X obj 20 20 inlet;
#X obj 110 20 inlet;
#X obj 20 220 outlet;
#X obj 77 220 outlet;
#X obj 134 220 outlet;
#X obj 191 220 outlet;
#X obj 20 99 route button axis touchpad sensor;
#X connect 0 0 8 0;
#X connect 1 0 0 1;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 8 0 4 0;
#X connect 8 1 5 0;
#X connect 8 2 6 0;
#X connect 8 3 7 0;
#X restore 20 140 pd controller;
#X text 20 20 joyosc helpers: receive and parse joyosc messages, f
26;
#X text 230 20 gpmotion: process motion data \, retrieve gravity and
rotation (local/world/player space) data, f 47;
#X obj 230 100 spigot;
#X obj 269 70 tgl 15 0 empty process process 17 7 0 10 #ffff00 #000000
#000000 1 1;
#X obj 230 209 gpmotion;
#X obj 420 70 tgl 15 0 empty process retrieve 17 7 0 10 #00ff00 #000000
#000000 1 1;
#X obj 420 100 metro 100;
#X obj 230 238 route gravity local world player;
#X symbolatom 300 100 10 0 0 0 - space -, f 10;
#X obj 20 330 hsl 64 15 -1 1 0 0 empty gravx empty -2 -8 0 10 #fcfcfc
#000000 #000000 3469 1;
#X obj 20 350 hsl 64 15 -1 1 0 0 empty gravy empty -2 -8 0 10 #fcfcfc
#000000 #000000 257 1;
#X obj 20 370 hsl 64 15 -1 1 0 0 empty gravz empty -2 -8 0 10 #fcfcfc
#000000 #000000 4346 1;
#X text 110 347 y - down-up;
#X text 110 327 x - left-right;
#X text 110 367 z - front-back;
#X obj 240 330 hsl 64 15 -1 1 0 0 empty locx empty -2 -8 0 10 #fcfcfc
#000000 #000000 5622 1;
#X obj 240 350 hsl 64 15 -1 1 0 0 empty locy empty -2 -8 0 10 #fcfcfc
#000000 #000000 3185 1;
#X obj 240 370 hsl 64 15 -1 1 0 0 empty locz empty -2 -8 0 10 #fcfcfc
#000000 #000000 2750 1;
#X text 240 305 local space;
#X text 330 327 pitch - down-up;
#X text 330 347 yaw - turn l/r;
#X text 330 367 roll - lean l/r;
#X obj 470 330 hsl 64 15 -1 1 0 0 empty wpx empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X obj 470 350 hsl 64 15 -1 1 0 0 empty wpy empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X text 560 327 pitch - down-up;
#X text 560 347 yaw/roll - l/r;
#X text 470 305 world/player space;
#N canvas 740 383 450 300 gravity 0;
#X obj 20 50 unpack f f f;
#X obj 20 139 s gravx;
#X obj 100 139 s gravy;
#X obj 180 139 s gravz;
#X obj 20 20 inlet;
#X text 20 190 gravity vector = orientation of the device;
#X obj 20 109 line;
#X obj 100 109 line;
#X obj 180 109 line;
#X obj 20 80 pack f 100;
#X obj 100 80 pack f 100;
#X obj 180 80 pack f 100;
#X text 270 80 smooth transitions;
#X connect 0 0 9 0;
#X connect 0 1 10 0;
#X connect 0 2 11 0;
#X connect 4 0 0 0;
#X connect 6 0 1 0;
#X connect 7 0 2 0;
#X connect 8 0 3 0;
#X connect 9 0 6 0;
#X connect 10 0 7 0;
#X connect 11 0 8 0;
#X restore 230 270 pd gravity;
#N canvas 747 383 450 312 local 0;
#X obj 20 50 unpack f f f;
#X obj 20 20 inlet;
#X obj 20 159 / 45;
#X obj 60 159 / 45;
#X obj 100 159 / 45;
#X obj 20 250 s locx;
#X obj 100 250 s locy;
#X obj 180 250 s locz;
#X obj 170 70 hradio 15 0 1 6 empty sensitivity empty 0 -8 0 10 #fcfcfc
#000000 #000000 3;
#X obj 170 94 expr 360 / pow(2 \, $f1);
#X text 20 270 pitch;
#X text 100 270 yaw;
#X text 180 270 roll;
#X text 240 250 local space rotation;
#X floatatom 170 123 5 0 0 0 - - -, f 5;
#X obj 20 219 line;
#X obj 100 219 line;
#X obj 180 219 line;
#X obj 20 190 pack f 100;
#X obj 100 190 pack f 100;
#X obj 180 190 pack f 100;
#X text 270 190 smooth transitions;
#X text 170 20 apply sensitivity and normalize \; e.g. \, sensitivity
factor 8: 45° → 1;
#X obj 170 151 s maxangle;
#X connect 0 0 2 0;
#X connect 0 1 3 0;
#X connect 0 2 4 0;
#X connect 1 0 0 0;
#X connect 2 0 18 0;
#X connect 3 0 19 0;
#X connect 4 0 20 0;
#X connect 8 0 9 0;
#X connect 9 0 14 0;
#X connect 14 0 4 1;
#X connect 14 0 3 1;
#X connect 14 0 2 1;
#X connect 14 0 23 0;
#X connect 15 0 5 0;
#X connect 16 0 6 0;
#X connect 17 0 7 0;
#X connect 18 0 15 0;
#X connect 19 0 16 0;
#X connect 20 0 17 0;
#X restore 310 270 pd local;
#N canvas 768 416 450 310 world_player 0;
#X obj 20 20 inlet;
#X obj 20 159 / 45;
#X obj 87 159 / 45;
#X obj 170 70 hradio 15 0 1 6 empty sensitivity empty 0 -8 0 10 #fcfcfc
#000000 #000000 3;
#X obj 170 94 expr 360 / pow(2 \, $f1);
#X text 20 270 pitch;
#X floatatom 170 123 5 0 0 0 - - -, f 5;
#X obj 20 50 unpack f f;
#X obj 20 250 s wpx;
#X obj 100 250 s wpy;
#X text 200 250 world/player space rotation;
#X text 100 270 yaw/roll;
#X obj 20 219 line;
#X obj 100 219 line;
#X obj 20 190 pack f 100;
#X obj 100 190 pack f 100;
#X text 200 190 smooth transitions;
#X text 170 20 apply sensitivity and normalize \; e.g. \, sensitivity
factor 8: 45° → 1;
#X connect 0 0 7 0;
#X connect 1 0 14 0;
#X connect 2 0 15 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 6 0 2 1;
#X connect 6 0 1 1;
#X connect 7 0 1 0;
#X connect 7 1 2 0;
#X connect 12 0 8 0;
#X connect 13 0 9 0;
#X connect 14 0 12 0;
#X connect 15 0 13 0;
#X restore 380 270 pd world_player;
#X text 520 70 select gravity/space;
#X msg 560 130 gravity;
#X msg 560 150 local;
#X msg 560 170 world;
#X msg 560 190 player;
#X obj 420 129 s space;
#X obj 560 100 loadbang;
#X obj 560 219 symbol;
#X msg 560 243 set \$1;
#X msg 300 128 \$1;
#X obj 300 157 route gravity;
#X obj 180 146 bng 15 250 50 0 empty reset empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X msg 180 170 reset;
#N canvas 382 228 539 592 messages 0;
#X msg 20 40 accel 0 0 0;
#X msg 20 70 gyro 0 0 0;
#X msg 20 150 start;
#X msg 80 150 stop;
#X msg 130 150 clear;
#X text 190 150 start \, stop \, and clear controller calibration;
#X text 190 50 input accelerator and gyro data from joyosc, f 45;
#X msg 20 190 reset;
#X text 190 190 reset all rotation data to 0 \, 0 \, 0 (recenter);
#X msg 20 230 set local 0 0 0;
#X msg 20 260 set world 0 0;
#X msg 20 290 set player 0 0;
#X text 190 250 set local \, world \, or player space rotation data
to the given angles in degrees, f 46;
#X text 190 110 pause processing of input data;
#X msg 20 340 mode \$1;
#X obj 100 325 tgl 15 0 empty mode empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X text 190 360 mode 1: produce momentary rotation data in degrees
per sec, f 46;
#X text 190 320 mode 0 (default): produce accumulated rotation data
in degrees, f 46;
#X msg 20 420 yawrf \$1;
#X obj 100 405 hsl 32 15 1.15 2 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X text 190 420 yaw relax factor (player space only): buffer zone for
combined yaw + roll, f 46;
#X obj 20 470 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X text 190 470 retrieve gravity vector;
#X msg 20 500 local;
#X msg 70 500 world;
#X msg 120 500 player;
#X text 190 500 retrieve local \, world \, or player rotation data
;
#X obj 20 550 outlet;
#X text 20 10 overview of all gpmotion messages;
#X obj 100 95 tgl 15 0 empty pause empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X msg 20 110 pause \$1;
#X obj 190 135 bng 15 250 50 0 empty clear empty 17 7 0 10 #fcfcfc
#000000 #000000;
#X obj 455 115 tgl 15 0 empty calibrate empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 455 130 sel 1 0;
#X obj 100 360 print mode;
#X connect 0 0 27 0;
#X connect 1 0 27 0;
#X connect 2 0 27 0;
#X connect 3 0 27 0;
#X connect 4 0 27 0;
#X connect 7 0 27 0;
#X connect 9 0 27 0;
#X connect 10 0 27 0;
#X connect 11 0 27 0;
#X connect 14 0 27 0;
#X connect 15 0 14 0;
#X connect 15 0 34 0;
#X connect 18 0 27 0;
#X connect 19 0 18 0;
#X connect 21 0 27 0;
#X connect 23 0 27 0;
#X connect 24 0 27 0;
#X connect 25 0 27 0;
#X connect 29 0 30 0;
#X connect 30 0 27 0;
#X connect 31 0 4 0;
#X connect 32 0 33 0;
#X connect 33 0 2 0;
#X connect 33 1 3 0;
#X restore 420 180 pd messages;
#X text 420 200 ↳ click to open;
#X text 20 250 ↳ click to open;
#N canvas 1040 390 495 345 META 0;
#X text 12 5 NAME gpmotion;
#X text 12 30 KEYWORDS control joyosc gamepad motion;
#X text 12 50 LICENSE GPL-3+;
#X text 12 70 DESCRIPTION process motion data \, retrieve gravity and
rotation (local/world/player space) data;
#X text 12 106 LIBRARY gpmotion;
#X text 12 126 AUTHOR Albert Gräf;
#X text 12 146 WEBSITE https://github.com/agraef/gpmotion;
#X text 12 166 RELEASE_DATE 2024;
#X restore 600 20 pd META;
#X obj 150 230 radar;
#N canvas 739 383 450 300 touchpad 0;
#X obj 92 230 s touchpad;
#X obj 20 60 route up down xy;
#X msg 20 88 \$5;
#X msg 56 88 \$5;
#X msg 92 88 \$3 \$4;
#X obj 20 117 t f b;
#X msg 92 150 0.5 0.5;
#X obj 20 20 inlet;
#X obj 20 200 s touchpadz;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 1 2 4 0;
#X connect 2 0 5 0;
#X connect 3 0 8 0;
#X connect 4 0 0 0;
#X connect 5 0 8 0;
#X connect 5 1 6 0;
#X connect 6 0 0 0;
#X connect 7 0 1 0;
#X restore 78 200 pd touchpad;
#X obj 470 400 radar worldplayer;
#N canvas 0 0 450 300 world/player 0;
#X obj 40 139 pack 0 0;
#X obj 90 109 t b f;
#X obj 40 168 s worldplayer;
#X obj 40 80 r wpy;
#X obj 90 80 r wpx;
#X obj 122 139 * -1;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 5 0;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 0 1;
#X restore 560 420 pd world/player;
#N canvas 174 352 719 542 buttons 0;
#X obj 20 70 route leftstick rightstick leftshoulder rightshoulder
;
#X obj 20 99 sel 1;
#X obj 112 99 sel 1;
#X obj 204 99 sel 1;
#X obj 304 99 sel 1;
#X obj 20 20 inlet;
#X obj 500 120 v space_i;
#X obj 20 231 expr space_i = (space_i+1) % 4;
#X floatatom 20 290 5 0 0 0 - - -, f 5;
#X obj 20 200 sel 1;
#X obj 70 200 sel 1;
#X obj 20 261 expr space_i = (if(space_i<=0 \, space_i+4 \, space_i)-1)
% 4;
#X obj 20 318 sel 0 1 2 3;
#X msg 20 347 gravity;
#X msg 20 371 local;
#X msg 20 395 world;
#X msg 20 419 player;
#X floatatom 140 360 5 0 0 0 - - -, f 5;
#X obj 140 201 sel 1;
#X obj 190 201 sel 1;
#X obj 140 331 expr sens_i = (if(sens_i<=0 \, sens_i+6 \, sens_i)-1)
% 6;
#X obj 140 301 expr sens_i = (sens_i+1) % 6;
#X obj 500 90 v sens_i;
#X obj 500 30 loadbang;
#X msg 500 59 3;
#X obj 330 200 sel 1;
#X obj 250 200 t b;
#X obj 20 128 s reset;
#X obj 112 128 s mode;
#X obj 204 128 s calibrate;
#X obj 304 128 s clear;
#X obj 20 448 symbol;
#X msg 20 477 set \$1;
#X obj 20 506 s space;
#X obj 140 388 s sensitivity;
#X obj 250 229 s process;
#X obj 330 229 s process;
#X obj 20 160 route dpdown dpup dpright dpleft a b x y;
#X text 320 160 x \, y: currently unused;
#X obj 110 10 t f;
#X obj 110 39 s leftz;
#X obj 180 10 t f;
#X obj 180 39 s rightz;
#X obj 140 410 print sensitivity;
#X obj 580 90 s sensitivity;
#X connect 0 0 1 0;
#X connect 0 0 39 0;
#X connect 0 1 2 0;
#X connect 0 1 41 0;
#X connect 0 2 3 0;
#X connect 0 3 4 0;
#X connect 0 4 37 0;
#X connect 1 0 27 0;
#X connect 2 0 28 0;
#X connect 3 0 29 0;
#X connect 4 0 30 0;
#X connect 5 0 0 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 9 0 7 0;
#X connect 10 0 11 0;
#X connect 11 0 8 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 12 2 15 0;
#X connect 12 3 16 0;
#X connect 13 0 31 0;
#X connect 14 0 31 0;
#X connect 15 0 31 0;
#X connect 16 0 31 0;
#X connect 17 0 34 0;
#X connect 17 0 43 0;
#X connect 18 0 21 0;
#X connect 19 0 20 0;
#X connect 20 0 17 0;
#X connect 21 0 17 0;
#X connect 23 0 24 0;
#X connect 24 0 22 0;
#X connect 24 0 44 0;
#X connect 25 0 36 0;
#X connect 26 0 35 0;
#X connect 31 0 32 0;
#X connect 32 0 33 0;
#X connect 37 0 9 0;
#X connect 37 1 10 0;
#X connect 37 2 18 0;
#X connect 37 3 19 0;
#X connect 37 4 26 0;
#X connect 37 5 25 0;
#X connect 39 0 40 0;
#X connect 41 0 42 0;
#X restore 20 230 pd buttons;
#X obj 20 400 radar left 32768;
#N canvas 736 383 450 300 axis 0;
#X obj 20 99 pack 0 0;
#X obj 90 99 t b f;
#X obj 20 128 s left;
#X obj 20 70 route leftx lefty rightx righty;
#X obj 140 99 pack 0 0;
#X obj 210 99 t b f;
#X obj 140 128 s right;
#X obj 20 20 inlet;
#X connect 0 0 2 0;
#X connect 1 0 0 0;
#X connect 1 1 0 1;
#X connect 3 0 0 0;
#X connect 3 1 1 0;
#X connect 3 2 4 0;
#X connect 3 3 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 5 1 4 1;
#X connect 7 0 3 0;
#X restore 49 170 pd axis;
#X obj 240 400 radar right 32768;
#X text 100 420 left - js - right;
#X text 20 305 gravity: 1g = 9.81 m/s^2;
#X floatatom 350 440 5 0 5 0 sens sensitivity -, f 5;
#X floatatom 400 440 5 0 0 0 - maxangle -, f 5;
#X text 320 400 rotation: -1..1 = -45°..45° at sens. 3, f 20;
#X connect 0 0 1 1;
#X connect 1 0 4 0;
#X connect 2 0 1 0;
#X connect 3 0 4 1;
#X connect 4 0 56 0;
#X connect 4 1 58 0;
#X connect 4 2 53 0;
#X connect 4 3 7 0;
#X connect 7 0 9 0;
#X connect 8 0 7 1;
#X connect 9 0 12 0;
#X connect 10 0 11 0;
#X connect 11 0 40 0;
#X connect 12 0 32 0;
#X connect 12 1 33 0;
#X connect 12 2 34 0;
#X connect 12 3 34 0;
#X connect 13 0 44 0;
#X connect 36 0 42 0;
#X connect 37 0 42 0;
#X connect 38 0 42 0;
#X connect 39 0 42 0;
#X connect 41 0 36 0;
#X connect 42 0 43 0;
#X connect 43 0 40 0;
#X connect 44 0 45 0;
#X connect 45 0 9 0;
#X connect 45 1 9 0;
#X connect 46 0 47 0;
#X connect 47 0 9 0;
#X connect 48 0 9 0;
